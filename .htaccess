ErrorDocument 403 /404.html
ErrorDocument 404 /404.html
Options -Indexes

RewriteEngine on
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ %{REQUEST_SCHEME}://%1%{REQUEST_URI} [L,R=302]

RewriteEngine on
RewriteCond %{HTTP_HOST} !^dennisschuett\.photography$
#RewriteCond %{HTTP_HOST} !^dennisschuett\.de$
#RewriteCond %{HTTP_HOST} !^dennisschuett\.com$
RewriteCond %{HTTP_HOST} !^schuett\.photo$
RewriteCond %{REQUEST_URI} !^/files/
RewriteRule ^(.*)$ http://dennisschuett.photography/$1 [L,R=302]

RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} !FeedBurner
RewriteRule ^news/feed\.xml$ http://feeds.feedburner.com/dennisschuett-photography [R,L]

RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} !FeedBurner
RewriteRule ^feed\.xml$ http://feeds.feedburner.com/dennisschuett-photography [R,L]

# 1 Month for most static assets
<filesMatch ".(css|jpg|jpeg|png|gif|js|ico|woff|webp)$">
Header set Cache-Control "max-age=2592000, public"
</filesMatch>

####################
# Attempt to redirect images to WebP if one exists
# and the client supports the file format
####################
# check if browser accepts webp
RewriteCond %{HTTP_ACCEPT} image/webp

# check if file is jpg or png
RewriteCond %{REQUEST_FILENAME} (.*\.jpe?g|png)$

# check if corresponding webp file exists image.png -> image.webp
RewriteCond %1\.webp -f

# serve up webp instead
RewriteRule (.+\.jpe?g|png)$ $1.webp [T=image/webp,E=accept:1]

AddType image/webp .webp
